# 多域环境运行

本节讲解在k8s中运行多个环境。

## 背景

经过设计，k8s集群可以应对多个故障域问题的情况，一般来说这些域对应到逻辑组中叫做`region`。主流的云平台定义了地域为一系列故障域的集合，并提供一系列的特色服务：同一地域中，每个故障域提供相同的接口和服务。

## 控制平面行为

所有的控制平面组件都支持作为可互换资源池运行，每个组件都可被复制。部署集群控制平面时，请将控制平面组件的副本放置在多个故障区域中。如果可用性是一个重要问题，请选择至少三个故障区域，并在至少三个故障区域中复制每个单独的控制平面组件（API服务器，调度程序等，群集控制器管理器）。如果您使用了云厂商提供的控制器，您也应当保证故障域有多个副本。
**注意** Kubernetes不为API服务器端点提供跨区域弹性。 您可以使用各种技术来提高群集API服务器的可用性，包括DNS轮询，SRV记录或具有运行状况检查的第三方负载平衡解决方案。

## 节点行为

节点启动时，每个节点上的kubelet会自动的将标签添加到代表kubernetes api中该特定的kubelet的Node对象。这些标签信息可以包含域信息。
