# 注解

您可以使用Kubernetes批注将任意非标识元数据附加到对象。 工具和库之类的客户端可以检索此元数据。


### 附加元数据到对象上

您可以使用标签或注释将元数据附加到Kubernetes对象。 标签可用于选择对象并查找满足特定条件的对象的集合。 相反，注释不用于标识和选择对象。 批注中的元数据可以是大小的，结构化的或非结构化的，并且可以包含标签不允许的字符。


注解类似于标签，是键值对的形式：

```code
 "metadata": {
  "annotations": {
    "key1" : "value1",
    "key2" : "value2"
  }
}
```


以下是一些注解中可以记录的信息示例：
* 由声明性配置层管理的字段。 将这些字段附加为注释可将其与客户端或服务器设置的默认值，自动生成的字段以及通过自动调整大小或自动缩放系统设置的字段区分开。
* 生成，发布或映像信息，例如时间戳，发行ID，git分支，PR号，图像哈希和注册表地址。
* 指向日志，监视，分析或审核存储库的指针。
* 可用于调试目的的客户端库或工具信息：例如，名称，版本和内部版本信息。
* 用户或工具/系统出处信息，例如来自其他生态系统组件的相关对象的URL。
* 轻量级推出工具元数据：例如，配置或检查点。
* 负责人的电话或寻呼机号码，或指定可在何处找到该信息的目录条目，例如团队网站。
* 从最终用户到实现的指令，以修改行为或使用非标准功能。

除了使用批注，您还可以将这种类型的信息存储在外部数据库或目录中，但这将使制作共享的客户端库和用于部署，管理，自省等的工具变得更加困难。

### 语法和字符集

注释是键/值对。 有效的注释键分为两部分：可选的前缀和名称，用斜杠（/）分隔。 名称段是必需的，并且必须为63个字符或更少，以字母数字字符（[a-z0-9A-Z]）开头和结尾，并带有破折号（-），下划线（_），点（。），以及之间的字母数字 。 前缀是可选的。 如果指定，则前缀必须是DNS子域：一系列由点（。）分隔的DNS标签，总计不超过253个字符，后跟斜杠（/）。

如果省略前缀，则假定注释密钥对用户是私有的。 向最终用户对象添加注释的自动化系统组件（例如kube-scheduler，kube-controller-manager，kube-apiserver，kubectl或其他第三方自动化）必须指定前缀。

kubernetes.io/和k8s.io/前缀是为Kubernetes核心组件保留的。

例如，这是带有注释imageregistry的Pod的配置文件：https://hub.docker.com/：
```code
apiVersion: v1
kind: Pod
metadata:
  name: annotations-demo
  annotations:
    imageregistry: "https://hub.docker.com/"
spec:
  containers:
  - name: nginx
    image: nginx:1.14.2
    ports:
    - containerPort: 80
```

