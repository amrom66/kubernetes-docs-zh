# 什么是k8s

当前页面是k8s的简介。

k8s是一个便携的，可扩展的，以及开源的平台，用来管理容器化的工作负载和服务，该基础设施兼具声明式配置和自动化特性。k8s是一个大型的，快速成长的生态系统。使用k8s服务，支持以及工具，具备广泛的可行性。

Kubernetes这个名字起源于希腊语，意思是舵手或飞行员。Google于2014年开源了kubernetes项目。Kubernetes将超过15年的Google在大规模生产工作负载方面的经验与社区中最好的想法和实践相结合。

## 回溯以往

想要理解kubernetes为什么这么有用处，让我们把时间往前推。

![](https://d33wubrfki0l68.cloudfront.net/26a177ede4d7b032362289c6fccd448fc4a91174/eb693/images/docs/container_evolution.svg)

**传统的部署**：早期，企业一般在物理机上运行应用。在物理机上没有办法解决资源的依赖，由此导致了资源的分配问题。例如，如果多个应用运行在同一个物理机上，某些实例可能会出现单个应用占用几乎全部资源的情况，带来的结果就是，其他的应用表现不佳。这种现象的解决方案之一是应用运行在不同的物理机上。但是，这样的话当资源利用不足的时候无法缩小资源，同时企业管理很多的物理机器是非常昂贵的。

***虚拟化部署**：虚拟化部署作为一个解决方案被提了出来。该方案允许在单个物理服务器上运行多个虚拟的机器。虚拟化方案将应用隔离在了虚拟机层面，并且提供了一定程度的安全性，因为一个应用的信息无法随意的被另外一个应用访问。

虚拟化方案提供了比物理机器更好的资源利用率，以及更好的可扩展性，因为一个应用可以很容易的新增和更新，减少了硬件的开销以及其他开销。通过虚拟化方案，你可以设置一组物理资源作为虚拟机集群。

每一个虚拟机都是一个运行所有组件的机器，包含虚拟化的硬件以及之上的操作系统组件，

**容器部署**：容器话和虚拟机很类似，但是它们可以更加轻松的在应用间隔离操作系统。因此，容器被认为是更加轻量级的。类似于虚拟机，一个容器有其自身的文件系统，共享的cpu，共享的内存，进程空间，以及其他。因为它们与基础架构的分离，所以可以跨云和OS进行分发。

容器化变得流行，是因为它们提供了额外的好处，例如：

* 敏捷的应用创建与部署：相比于虚拟机镜像的使用，容器化提升了效率
* 持续开发，持续继承，以及持续部署：通过快速有效的回滚提供可靠且频繁的容器映像构建和部署
* 开发和运维的关注点分离：在构建/发版的时候创建应用镜像，而不是开发的时候，由此解偶了应用月基础架构
* 可观察性不仅可以显示操作系统级别的信息和指标，还可以显示应用程序的运行状况和其他信号。
* 跨开发，测试和生产的环境一致性：在笔记本电脑上与在云中一样在笔记本电脑上运行。
* 云和操作系统分发的可移植性：可在Ubuntu，RHEL，CoreOS，本地，主要公共云以及其他任何地方运行。
* 以应用程序为中心的管理：提高抽象级别，从在虚拟硬件上运行操作系统到使用逻辑资源在操作系统上运行应用程序。
* 松散耦合，分布式，弹性，解放的微服务：应用程序被分解成较小的独立部分，并且可以动态部署和管理–而不是在一台大型单机上运行的单片堆栈。
* 资源隔离：可预测的应用程序性能。
* 资源利用：高效率和高密度。


## 为什么你需要kubernetes以及它可以做什么

容器化是一个很好的方式去绑定并运行应用。在一个生产环境中，你需要管理运行应用的容器并且确保没有宕机时间。例如：如果一个容器宕机，另外一个容器需要启动。这种行为如果有系统来掌控是不是变得简单的多了？

这就是k8s自愈的原理!k8s为你提供了一个弹性的分布式系统作为一个基础组件。它关注为你的应用扩容和故障转移，提供了部署模式以及更多。例如：k8s可以很容易的为你的系统提供金丝雀发布。

kubernetes为你提供如下：

* 服务发现与负载均衡：k8s通过DNS名称或者它们自身的IP地址暴露容器。如果同一容器流量过高，kubernete能够均衡负载并且分发网络流量，保证部署服务的稳定性。
* 存储编排：Kubernetes允许您自动挂载您选择的存储系统，例如本地存储，公共云提供商等。
* 自动部署和回滚：您可以使用Kubernetes描述已部署容器的所需状态，它可以以受控的速率将实际状态更改为所需状态。 例如，您可以自动化Kubernetes来为您的部署创建新容器，删除现有容器并将其所有资源用于新容器。
* 自动资源回收：您为Kubernetes提供了一个节点集群，可用于运行容器化任务。 您告诉Kubernetes每个容器需要多少CPU和内存（RAM）。 Kubernetes可以将容器安装到您的节点上，以充分利用您的资源。
* 自愈：Kubernetes重新启动失败的容器，替换容器，杀死不响应用户定义的运行状况检查的容器，并且在准备好服务之前不将其通告给客户端。
* 密钥与配置管理：Kubernetes允许您存储和管理敏感信息，例如密码，OAuth令牌和SSH密钥。 您可以部署和更新机密信息和应用程序配置，而无需重建容器映像，也无需在堆栈配置中公开机密信息。

## k8s不能做到什么

Kubernetes不是传统的，包罗万象的PaaS（平台即服务）系统。 由于Kubernetes在容器级别而非硬件级别运行，因此它提供了PaaS产品共有的一些普遍适用的功能，例如部署，扩展，负载平衡，并允许用户集成其日志记录，监视和警报解决方案。 但是，Kubernetes并不是单片的，并且这些默认解决方案是可选的和可插入的。 Kubernetes提供了构建开发人员平台的基础，但是在重要的地方保留了用户的选择和灵活性。

k8s:
* 不限制支持的应用程序类型。 Kubernetes旨在支持极为多样化的工作负载，包括无状态，有状态和数据处理工作负载。 如果应用程序可以在容器中运行，那么它应该可以在Kubernetes上很好地运行。
* 不部署源代码，也不构建您的应用程序。 持续集成，交付和部署（CI / CD）工作流取决于组织的文化和偏好以及技术要求。
* 不提供应用程序级别的服务，例如中间件（例如，消息总线），数据处理框架（例如，Spark），数据库（例如，MySQL），缓存或群集存储系统（例如，Ceph） 作为内置服务。 这样的组件可以在Kubernetes上运行，并且/或者可以由Kubernetes上运行的应用程序通过诸如开放服务代理之类的可移植机制来访问。
* 不指示日志记录，监视或警报解决方案。 它提供了一些集成作为概念证明，并提供了收集和导出指标的机制。
* 不提供也不要求配置语言/系统（例如，Jsonnet）。 它提供了一个声明性API，可以通过任意形式的声明性规范作为目标。
* 不提供也不采用任何全面的机器配置，维护，管理或自我修复系统。
* 此外，Kubernetes不仅仅是一个编排系统。 实际上，它消除了编排的需要。 编排的技术定义是执行定义的工作流程：首先执行A，然后执行B，然后执行C。相反，Kubernetes包含一组独立的，可组合的控制过程，这些过程连续地将当前状态驱动到提供的所需状态。 从A到C的方式无关紧要。集中控制也不是必需的。 这使得系统更易于使用，功能更强大，更健壮，更具弹性和可扩展性。

